var data = {
  100000: {
    46: "47",
    47: "48",
    48: "49",
    49: "50",
    50: "51",
    51: "52",
    52: "53",
    53: "54",
    54: "55",
    55: "56",
    56: "57",
    57: "58",
    58: "59",
    59: "60",
    60: "61",
    61: "62",
    62: "63",
    63: "64",
    64: "65",
    65: "66",
    66: "67",
    67: "68",
    68: "69",
    69: "70",
    70: "71",
    71: "72",
    72: "73",
    73: "74",
    74: "75",
    75: "76",
    76: "77",
    77: "78",
    78: "79",
    79: "80",
    80: "81",
    81: "82",
    82: "83",
    83: "84",
    84: "85",
    85: "86",
    86: "87",
    87: "88",
    88: "89",
    89: "90",
    90: "91",
    91: "92",
    92: "93",
    93: "94",
    94: "95",
    95: "96",
    96: "97",
    97: "98",
    98: "99",
    99: "100",
    100: "101",
    101: "102",
    102: "103",
    103: "104",
    104: "105",
    105: "106",
    106: "107",
    107: "108",
    108: "109",
    109: "110",
    110: "111",
    111: "112",
    112: "113",
    113: "114",
    114: "115",
    115: "116",
    116: "117",
    117: "118",
    118: "119",
    119: "120",
    120: "121",
    121: "122",
    122: "123",
    123: "124",
    124: "125",
    125: "126",
    126: "127",
    127: "128",
    128: "129",
    129: "130",
    130: "131",
    131: "132",
    132: "133",
    133: "134",
    134: "135",
    135: "136",
    136: "137",
    137: "138",
    138: "139",
    139: "140",
    140: "141",
    141: "142",
    142: "143",
    143: "144",
    144: "145",
    145: "146",
    146: "147",
    147: "148",
    148: "149",
    149: "150",
    150: "151",
    151: "152",
    152: "153",
    153: "154",
    154: "155",
    155: "156",
    156: "157",
    157: "158",
    158: "159",
    159: "160",
    160: "161",
    161: "162",
    162: "163",
    163: "164",
    164: "165",
    165: "166",
    166: "167",
    167: "168",
    168: "169",
    169: "170",
    170: "171",
    171: "172",
    172: "173",
    173: "174",
    174: "175",
    175: "176",
    176: "177",
    177: "178",
    178: "179",
    179: "180",
    180: "181",
    181: "182",
    182: "183",
    183: "184",
    184: "185",
    185: "186",
    186: "187",
    187: "188",
    188: "189",
    189: "190",
    190: "191",
    191: "192",
    192: "193",
    193: "194",
    194: "195",
    195: "196",
    196: "197",
    197: "198",
    198: "199"
  },
  100001: {
    46: "47",
    47: "48",
    48: "49",
    49: "50",
    50: "51",
    51: "52",
    52: "53",
    53: "54",
    54: "55",
    55: "56",
    56: "57",
    57: "58",
    58: "59",
    59: "60",
    60: "61",
    61: "62",
    62: "63",
    63: "64",
    64: "65",
    65: "66",
    66: "67",
    67: "68",
    68: "69",
    69: "70",
    70: "71",
    71: "72",
    72: "73",
    73: "74",
    74: "75",
    75: "76",
    76: "77",
    77: "78",
    78: "79",
    79: "80",
    80: "81",
    81: "82",
    82: "83",
    83: "84",
    84: "85",
    85: "86",
    86: "87",
    87: "88",
    88: "89",
    89: "90",
    90: "91",
    91: "92",
    92: "93",
    93: "94",
    94: "95",
    95: "96",
    96: "97",
    97: "98",
    98: "99",
    99: "100",
    100: "101",
    101: "102",
    102: "103",
    103: "104",
    104: "105",
    105: "106",
    106: "107",
    107: "108",
    108: "109",
    109: "110",
    110: "111",
    111: "112",
    112: "113",
    113: "114",
    114: "115",
    115: "116",
    116: "117",
    117: "118",
    118: "119",
    119: "120",
    120: "121",
    121: "122",
    122: "123",
    123: "124",
    124: "125",
    125: "126",
    126: "127",
    127: "128",
    128: "129",
    129: "130",
    130: "131",
    131: "132",
    132: "133",
    133: "134",
    134: "135",
    135: "136",
    136: "137",
    137: "138",
    138: "139",
    139: "140",
    140: "141",
    141: "142",
    142: "143",
    143: "144",
    144: "145",
    145: "146",
    146: "147",
    147: "148",
    148: "149",
    149: "150",
    150: "151",
    151: "152",
    152: "153",
    153: "154",
    154: "155",
    155: "156",
    156: "157",
    157: "158",
    158: "159",
    159: "160",
    160: "161",
    161: "162",
    162: "163",
    163: "164",
    164: "165",
    165: "166",
    166: "167",
    167: "168",
    168: "169",
    169: "170",
    170: "171",
    171: "172",
    172: "173",
    173: "174",
    174: "175",
    175: "176",
    176: "177",
    177: "178",
    178: "179",
    179: "180",
    180: "181",
    181: "182",
    182: "183",
    183: "184",
    184: "185",
    185: "186",
    186: "187",
    187: "188",
    188: "189",
    189: "190",
    190: "191",
    191: "192",
    192: "193",
    193: "194",
    194: "195",
    195: "196",
    196: "197",
    197: "198",
    198: "199"
  }
};
var man = [
  {
    'a0': '50.4',
    'a1': '76.5',
    'a2': '88.5',
    'a3': '96.8',
    'a4': '104.1',
    'a5': '111.3',
    'a6': '117.7',
    'a7': '124',
    'a8': '130',
    'a9': '135.4',
    'a10': '140.2',
    'a11': '145.3',
    'a12': '151.9',
    'a13': '159.5',
    'a14': '165.9',
    'a15': '169.8',
    'a16': '171.6',
    'a17': '172.3',
    'a18': '172.7',
    'a19': '172.7',
    'a20': '172.7',
    'a21': '172.7'
  },
  {
    'b0': '53.8',
    'b1': '81.8',
    'b2': '95.3',
    'b3': '104.1',
    'b4': '111.8',
    'b5': '119.6',
    'b6': '126.6',
    'b7': '133.7',
    'b8': '140.4',
    'b9': '146.5',
    'b10': '152',
    'b11': '158.1',
    'b12': '166',
    'b13': '174.2',
    'b14': '179.4',
    'b15': '182',
    'b16': '183.2',
    'b17': '183.7',
    'b18': '183.9',
    'b19': '183.9',
    'b20': '183.9',
    'b21': '183.9'
  },
  {
    'c0': '47.1',
    'c1': '71.5',
    'c2': '82.1',
    'c3': '89.7',
    'c4': '96.7',
    'c5': '103.3',
    'c6': '109.1',
    'c7': '114.6',
    'c8': '119.9',
    'c9': '124.6',
    'c10': '130.7',
    'c11': '132.9',
    'c12': '138.1',
    'c13': '145',
    'c14': '152.3',
    'c15': '157.5',
    'c16': '159.9',
    'c17': '160.9',
    'c18': '161.3',
    'c19': '161.3',
    'c20': '161.3',
    'c21': '161.3'
  }
];
// a a0:正常； b b0 超高  c  c0 偏矮  数字是岁数
var woman = [
  {
    'a0': '49.7',
    'a1': '75.0',
    'a2': '87.2',
    'a3': '95.6',
    'a4': '103.1',
    'a5': '110.2',
    'a6': '116.6',
    'a7': '122.5',
    'a8': '128.5',
    'a9': '134.1',
    'a10': '140.1',
    'a11': '146.6',
    'a12': '152.4',
    'a13': '156.3',
    'a14': '158.6',
    'a15': '159.8',
    'a16': '160.1',
    'a17': '160.3',
    'a18': '160.6',
    'a19': '160.6',
    'a20': '160.6',
    'a21': '160.6'
  },
  {
    'b0': '53',
    'b1': '80.2',
    'b2': '93.9',
    'b3': '102.9',
    'b4': '110.6',
    'b5': '118.4',
    'b6': '125.4',
    'b7': '132.1',
    'b8': '138.7',
    'b9': '145.1',
    'b10': '152',
    'b11': '159.2',
    'b12': '164.5',
    'b13': '167.6',
    'b14': '169.3',
    'b15': '170.1',
    'b16': '170.3',
    'b17': '170.5',
    'b18': '170.7',
    'b19': '170.7',
    'b20': '170.7',
    'b21': '170.7'
  },
  {
    'c0': '46.6',
    'c1': '70.0',
    'c2': '80.9',
    'c3': '88.6',
    'c4': '95.8',
    'c5': '102.3',
    'c6': '108.1',
    'c7': '113.3',
    'c8': '118.5',
    'c9': '123.3',
    'c10': '128.3',
    'c11': '134.2',
    'c12': '140.2',
    'c13': '145',
    'c14': '147.9',
    'c15': '149.5',
    'c16': '149.8',
    'c17': '150.1',
    'c18': '150.4',
    'c19': '150.4',
    'c20': '150.4',
    'c21': '150.4'
  }
];
var culture = {
  0: "小学",
  1: "初中",
  2: "高中",
  3: "本科",
  4: "硕士",
  5: "博士",
  6: "博士后"
}

var kg = {
  0: "1",
  1: "2",
  2: "3",
  3: "4",
  4: "5",
  5: "6",
  6: "7",
  7: "8",
  8: "9",
  9: "10",
  10: "11",
  11: "12",
  12: "13",
  13: "14",
  14: "15",
  15: "16",
  16: "17",
  17: "18",
  18: "19",
  19: "20",
  20: "21",
  21: "22",
  22: "23",
  23: "24",
  24: "25",
  25: "26",
  26: "27",
  27: "28",
  28: "29",
  29: "30",
  30: "31",
  31: "32",
  32: "33",
  33: "34",
  34: "35",
  35: "36",
  36: "37",
  37: "38",
  38: "39",
  39: "40",
  40: "41",
  41: "42",
  42: "43",
  43: "44",
  44: "45",
  45: "46",
  46: "47",
  47: "48",
  48: "49",
  49: "50",
  50: "51",
  51: "52",
  52: "53",
  53: "54",
  54: "55",
  55: "56",
  56: "57",
  57: "58",
  58: "59",
  59: "60",
  60: "61",
  61: "62",
  62: "63",
  63: "64",
  64: "65",
  65: "66",
  66: "67",
  67: "68",
  68: "69",
  69: "70",
  70: "71",
  71: "72",
  72: "73",
  73: "74",
  74: "75",
  75: "76",
  76: "77",
  77: "78",
  78: "79",
  79: "80",
  80: "81",
  81: "82",
  82: "83",
  83: "84",
  84: "85",
  85: "86",
  86: "87",
  87: "88",
  88: "89",
  89: "90",
  90: "91",
  91: "92",
  92: "93",
  93: "94",
  94: "95",
  95: "96",
  96: "97",
  97: "98",
  98: "99",
  99: "100",
  100: "101",
  101: "102",
  102: "103",
  103: "104",
  104: "105",
  105: "106",
  106: "107",
  107: "108",
  108: "109",
  109: "110",
  110: "111",
  111: "112",
  112: "113",
  113: "114",
  114: "115",
  115: "116",
  116: "117",
  117: "118",
  118: "119",
  119: "120",
  120: "121",
  121: "122",
  122: "123",
  123: "124",
  124: "125",
  125: "126",
  126: "127",
  127: "128",
  128: "129",
  129: "130",
  130: "131",
  131: "132",
  132: "133",
  133: "134",
  134: "135",
  135: "136",
  136: "137",
  137: "138",
  138: "139",
  139: "140",
  140: "141",
  141: "142",
  142: "143",
  143: "144",
  144: "145",
  145: "146",
  146: "147",
  147: "148",
  148: "149",
  149: "150",
  150: "151",
  151: "152",
  152: "153",
  153: "154",
  154: "155",
  155: "156",
  156: "157",
  157: "158",
  158: "159",
  159: "160",
  160: "161",
  161: "162",
  162: "163",
  163: "164",
  164: "165",
  165: "166",
  166: "167",
  167: "168",
  168: "169",
  169: "170",
  170: "171",
  171: "172",
  172: "173",
  173: "174",
  174: "175",
  175: "176",
  176: "177",
  177: "178",
  178: "179",
  179: "180",
  180: "181",
  181: "182",
  182: "183",
  183: "184",
  184: "185",
  185: "186",
  186: "187",
  187: "188",
  188: "189",
  189: "190",
  190: "191",
  191: "192",
  192: "193",
  193: "194",
  194: "195",
  195: "196",
  196: "197",
  197: "198",
  198: "199",
  199: '200'
};
function randomString() {

  var timestamp = new Date().getTime();
  return timestamp;
}
function throttle(fn, gapTime) {
  if (gapTime == null || gapTime == undefined) {
    gapTime = 1500
  }

  let _lastTime = null

  // 返回新的函数
  return function () {
    let _nowTime = + new Date()
    if (_nowTime - _lastTime > gapTime || !_lastTime) {
      fn.apply(this, arguments)   //将this和参数传给原函数
      _lastTime = _nowTime
    }
  }
}
/*获取当前页url*/
function getCurrentPageUrl() {
  var pages = getCurrentPages()    //获取加载的页面
  var currentPage = pages[pages.length - 1]    //获取当前页面的对象
  var url = currentPage.route    //当前页面url
  return url
}

/*获取当前页带参数的url*/
function getCurrentPageUrlWithArgs() {
  var pages = getCurrentPages()    //获取加载的页面
  var currentPage = pages[pages.length - 1]    //获取当前页面的对象
  var url = currentPage.route    //当前页面url
  var options = currentPage.options    //如果要获取url中所带的参数可以查看options

  //拼接url的参数
  var urlWithArgs = url + '?'
  for (var key in options) {
    var value = options[key]
    urlWithArgs += key + '=' + value + '&'
  }
  urlWithArgs = urlWithArgs.substring(0, urlWithArgs.length - 1)

  return urlWithArgs
}
function formatTime(time) {
  if (typeof time !== 'number' || time < 0) {
    return time
  }

  var hour = parseInt(time / 3600)
  time = time % 3600
  var minute = parseInt(time / 60)
  time = time % 60
  var second = time

  return ([hour, minute, second]).map(function (n) {
    n = n.toString()
    return n[1] ? n : '0' + n
  }).join(':')
}
function imageUtil(e) {
  var imageSize = {};
  var originalWidth = e.detail.width;//图片原始宽  
  var originalHeight = e.detail.height;//图片原始高  
  var originalScale = originalHeight / originalWidth;//图片高宽比  
  console.log('originalWidth: ' + originalWidth)
  console.log('originalHeight: ' + originalHeight)
  //获取屏幕宽高  
  wx.getSystemInfo({
    success: function (res) {
      var windowWidth = res.windowWidth;
      var windowHeight = res.windowHeight;
      var windowscale = windowHeight / windowWidth;//屏幕高宽比  
      console.log('windowWidth: ' + windowWidth)
      console.log('windowHeight: ' + windowHeight)
      if (originalScale < windowscale) {//图片高宽比小于屏幕高宽比  
        //图片缩放后的宽为屏幕宽  
        imageSize.imageWidth = windowWidth;
        imageSize.imageHeight = (windowWidth * originalHeight) / originalWidth;
      } else {//图片高宽比大于屏幕高宽比  
        //图片缩放后的高为屏幕高  
        imageSize.imageHeight = windowHeight;
        imageSize.imageWidth = (windowHeight * originalWidth) / originalHeight;
      }

    }
  })
  console.log('缩放后的宽: ' + imageSize.imageWidth)
  console.log('缩放后的高: ' + imageSize.imageHeight)
  return imageSize;
}
//分装请求
function getAj(url, keys, method, callback) {
  wx.request({
    url: url,
    data: keys,
    method: '' + method + '',
    header: { 'content-Type': 'application/json' },
    success: function (res) {
      if (res.statusCode == 200) {
        callback(res.data);
      }
    }
  })
}
// ajax 请求
function getRequset(url, keyword, pageindex, callbackcount,showtype, callback) {
  wx.request({
    url: url,
    data: {
      page: pageindex,
      pageall: callbackcount,
      openid: keyword,
      pid:showtype
    },
    method: 'GET',
    header: { 'content-Type': 'application/json' },
    success: function (res) {
      if (res.statusCode == 200) {
        callback(res.data);
      }
    }
  })
}
// 分页订单获取数据请求
function getSearchMusic(url, keyword, openid, pageindex, callbackcount, callback) {
  wx.request({
    url: url,
    data: {
      oid: openid,
      page: pageindex,
      g_tk: 5381,
      uin: 0,
      format: 'json',
      inCharset: 'utf-8',
      outCharset: 'utf-8',
      notice: 0,
      platform: 'h5',
      needNewCode: 1,
      w: keyword,
      zhidaqu: 1,
      catZhida: 1,
      t: 0,
      flag: 1,
      ie: 'utf-8',
      sem: 1,
      aggr: 0,
      perpage: 20,
      n: callbackcount,  //返回数据的个数  
      p: pageindex,
      remoteplace: 'txt.mqq.all',
      _: Date.now()
    },
    method: 'GET',
    header: { 'content-Type': 'application/json' },
    success: function (res) {
      if (res.statusCode == 200) {
        callback(res.data);
      }
    }
  })
}

// 分页获取数据请求
function getarrimg(callback) {
  wx.request({
    url: 'https://wx.biergao.vip/api/index/getArrimg',
    header: {
      'content-type': 'application/json'
    },
    success: function (res) {
      if (res.statusCode == 200) {
        callback(res.data);
      }
    }
  });
}
// 获取用户数据
function getUserOpenid(url, callback) {
  var that = this;
  wx.login({
    success: function (r) {
      var code = r.code;//登录凭证
      if (code) {
        //2、调用获取用户信息接口
        wx.getUserInfo({
          success: res => {
            // console.log({ encryptedData: res.encryptedData, iv: res.iv, code: code })
            //3.请求自己的服务器，解密用户信息 获取unionId等加密信息
            wx.request({
              url: url + 'biaob/getOpenid3',
              data: { encryptedData: res.encryptedData, iv: res.iv, code: code },
              method: 'get',
              header: {
                'content-type': 'application/x-www-form-urlencoded'
              },
              success: function (res) {
                res.data.iv = code;
                wx.setStorageSync('openid', res.data.openId);
                wx.setStorageSync('userid', res.data.userid);
                wx.setStorageSync('nickname', res.data.nickName);
                wx.setStorageSync('unionId', res.data.unionId);
                callback(res.data);
              },
              fail: function () {
                callback(false);
              }
            })
          },
          fail: function () {
            callback(false);
          }
        })

      } else {
        callback(false);
      }
    }
  })
}
function savePicToAlbum(tempFilePath) {
  let that = this;
  wx.getSetting({
    success(res) {
      if (!res.authSetting['scope.writePhotosAlbum']) {
        wx.authorize({
          scope: 'scope.writePhotosAlbum',
          success() {
            wx.saveImageToPhotosAlbum({
              filePath: tempFilePath,
              success(res) {
                wx.showToast({
                  title: '保存成功'
                });
              },
              fail(res) {
                console.log(res);
              }
            })
          },
          fail() {
            // 用户拒绝授权,打开设置页面
            wx.openSetting({
              success: function (data) {
                console.log("openSetting: success");
              },
              fail: function (data) {
                console.log("openSetting: fail");
              }
            });
          }
        })
      } else {
        wx.saveImageToPhotosAlbum({
          filePath: tempFilePath,
          success(res) {
            wx.showToast({
              title: '保存成功',
            });
          },
          fail(res) {
            console.log(res);
          }
        })
      }
    },
    fail(res) {
      console.log(res);
    }
  })
}
function image() {
  var imageSize = {};
  var originalScale = 0.2;//图片高宽比  
  //获取屏幕宽高  
  wx.getSystemInfo({
    success: function (res) {
      var windowWidth = res.windowWidth;
      var windowHeight = res.windowHeight;
      var windowscale = windowHeight / windowWidth;//屏幕高宽比  
      console.log('windowWidth: ' + windowWidth)
      console.log('windowHeight: ' + windowHeight)
      if (originalScale < windowscale) {//图片高宽比小于屏幕高宽比  
        //图片缩放后的宽为屏幕宽  
        imageSize.imageWidth = windowWidth;
        imageSize.imageHeight = (windowWidth * 400) / 320;
        imageSize.chaWidth = windowWidth - 320;
        imageSize.chaHeight = (windowWidth * 400) / 320 - 400;
      } else {//图片高宽比大于屏幕高宽比  
        //图片缩放后的高为屏幕高  
        imageSize.imageHeight = windowHeight;
        imageSize.imageWidth = (windowHeight * 320) / 400;
        imageSize.chaWidth = windowWidth - 320;
        imageSize.chaHeight = (windowWidth * 400) / 320 - 400;
      }

    }
  })
  console.log('缩放后的宽: ' + imageSize.imageWidth)
  console.log('缩放后的高: ' + imageSize.imageHeight)
  return imageSize;
}
//获取营养填写数据判断是否存在
function getyingyang(url, keys, method, callback) {
  wx.request({
    url: url,
    data: keys,
    method: '' + method + '',
    header: { 'content-Type': 'application/json' },
    success: function (res) {
      if (res.statusCode == 200) {
        callback(res.data);
      }
    }
  })
}
module.exports = {
  formatTime: formatTime,
  imageUtil: imageUtil,
  area: data,
  throttle: throttle,
  randomString: randomString,
  getSearchMusic: getSearchMusic,
  getarrimg: getarrimg,
  getRequset: getRequset,
  getAj: getAj,
  man: man,
  woman: woman,
  getUserOpenid: getUserOpenid,
  kg: kg,
  culture: culture,
  savePicToAlbum: savePicToAlbum,
  image: image,
  getCurrentPageUrl: getCurrentPageUrl,
  getCurrentPageUrlWithArgs: getCurrentPageUrlWithArgs
}
